<div>
    <div class="contenedor-info">
        <div class="patient-info">
            <div class="patient-info-keys">
                <p>PACIENTE: </p>
                <p>ESTUDIO: </p>
                <p>PROCEDENCIA: </p>
                <p>MEDICO: </p>
            </div>
            <div class="patient-info-values">
                <p>{{estudio.paciente.nombreCompleto}}</p>
                <p>{{estudio.concepto.concepto}}</p>
                <p>{{estudio.institucion.nombre}}</p>
                <p>{{estudio.ordenVenta.medicoReferente.nombres}}</p>

            </div>
        </div>
        <div class="action-buttons ">
            <button class="btn btn-primary btn-sm" (click)="ver(estudio)">Abrir estudio en linea</button>
            <button class="btn btn-primary btn-sm" (click)="abrirConWeasis(estudio)">Abrir con weasis</button>
            <button class="btn btn-secondary btn-sm" (click)="descargarZip(estudio)">Descargar estudio en zip</button>
            <button class="btn btn-secondary btn-sm" (click)="descargarWeasisWindows()">Descargar Weasis para
                windows</button>
            <button class="btn btn-secondary btn-sm" (click)="descargarWeasisMac()">Descargar weasis para mac</button>
        </div>
    </div>

    <div *ngIf="medicoLocal && !mostrarSubidaExterna" class="report-action-buttons">
        <div class="report-buttons">
            <button class="btn btn-primary" (click)="mostrarSubidaExterna = !mostrarSubidaExterna">Subir PDF</button>
            <button class="btn btn-secondary">Formatear Conclusi贸n</button>
        </div>
        <div></div>
    </div>

    <div class="container-report-ia">
        <div>
            <div *ngIf="mostrarSubidaExterna">
                <app-subir-interpretacion [idPacs]="this.estudio?.idPacs"></app-subir-interpretacion>
                <button class="btn btn-success btn-lg my-2" (click)="regresar()">Regresar</button>
            </div>

            <div *ngIf="medicoLocal && !mostrarSubidaExterna" style="margin-left: 1%;">
                <quill-editor [styles]="{height: '350px',width:'100%', backgroundColor:'#faf8f8'}"
                    [modules]="quillEditorModules" formControlName="textEditor">
                </quill-editor>
            </div>

            <div *ngIf="medicoLocal && !mostrarSubidaExterna" class="create-report-button">
                <button style="box-shadow: 1px 2px 6px #000000;" class="btn btn-success btn-lg">Crear PDF</button>
            </div>
        </div>
        <div *ngIf="medicoLocal && !mostrarSubidaExterna" class="conclusion-ia">
            <textarea
                style="background-image: linear-gradient(to top, #c4c5c7 0%, #dcdddf 52%, #ebebeb 100%); color:black; font-size: large;"
                class="form-control" id="exampleFormControlTextarea1" rows="12"
                placeholder="Genere la conclusi贸n con IA para obtener una previsualizaci贸n."></textarea>
            <div class="contenedor-ia">
                <button style="box-shadow: 1px 2px 6px #000000; margin-top: 3%;" class="btn btn-primary">Generar Conclusion con IA</button>
            </div>
        </div>
    </div>


</div>

<!-- <form>
    <div class="form-group my-3">
        <label for="paciente">Paciente</label>
        <input type="text" name="paciente" id="paciente" class="form-control"
            [(ngModel)]="estudio?.paciente.nombreCompleto">
    </div>

    <div class="form-group my-3">
        <label for="estudio">Estudio</label>
        <input type="text" name="estudio" id="estudio" class="form-control" [(ngModel)]="estudio?.concepto.concepto">
    </div>

    <div class="form-group my-3">
        <label for="procedencia">Procedencia</label>
        <input type="text" name="procedencia" id="procedencia" class="form-control"
            [(ngModel)]="estudio?.institucion.nombre">
    </div>


    
    <div class="form-group my-3 " *ngIf="estudio?.ordenVenta?.medicoReferente">
        <label for="medico">Medico</label>
        <div class="medico-referente">
            <input type="text" name="medico" id="medico" class="form-control input-medico" 
            [value]="estudio?.ordenVenta?.medicoReferente.nombres + ' ' +estudio?.ordenVenta?.medicoReferente.apellidos">
        </div>
    </div>


    
    <div class="form-group my-3" *ngIf="estudio?.ordenVenta?.motivo">
        <label for="motivo">Motivo</label>
        <input type="text" name="motivo" id="motivo" class="form-control" [(ngModel)]="estudio?.ordenVenta.motivo">
    </div>

    <div class="form-group my-3" *ngIf="estudio?.mensaje">
        <label for="mensaje">Mensaje</label>
        <input type="text" name="mensaje" id="mensaje" class="form-control" [(ngModel)]="estudio.mensaje">
    </div>

    <div class="form-group my-3" *ngIf="antecedentes">
        <label for="antecedentes">Antecedentes</label>
        <textarea name="antecedentes" id="antecedentes" class="form-control" [(ngModel)]="antecedentes"> </textarea>
    </div>

    <h2 *ngIf="estudiosDeOrden.length > 1">
        <b style = "color: red;">Favor de interpretar todos los estudios en este reporte</b>
    </h2>

    <div class="contenedor-img-fluid" *ngIf="multimediaCargada | async ">
        <div class="form-group my-3" *ngFor="let img of multimedia">
            <img *ngIf="img.tipo == 'IMAGEN'" class="img-fluid" [src]="filesPath + img.ruta">
        </div>
    </div>

    <div *ngIf="!estudio.concepto.dicom && multimediaCargada | async ">
        <div class="form-group my-3" *ngFor="let pdf of multimedia">
            <pdf-viewer *ngIf="pdf.tipo == 'DOCUMENTO'" [src]="filesPath + pdf.ruta" [render-text]="true"
                [original-size]="false" style="width: 1100px; height: 700px">
            </pdf-viewer>

            <button *ngIf="pdf.tipo == 'DOCUMENTO'" type="button" class="btn btn-primary btn-sm"
                (click)="expandir(pdf)">
                Expandir
            </button>
        </div>
    </div>



    <div *ngIf="medicoLocal && !mostrarSubidaExterna" class="flex-center">
      <button class=" btn btn-success btn-sm my-2"  (click)="mostrarSubidaExterna = !mostrarSubidaExterna">Subir pdf</button>
    </div>

    <div *ngIf="medicoLocal && mostrarSubidaExterna" class="flex-center">
      <button class="btn btn-danger btn-sm my-2" (click)="mostrarSubidaExterna = !mostrarSubidaExterna">Usar dictador</button>
    </div>




    <div *ngIf="medicoLocal && !mostrarSubidaExterna">

      <form [formGroup]="templateForm">
        <quill-editor
            [styles]="{height: '400px',width:'100%', backgroundColor:'#faf8f8'}"
            [modules]="quillEditorModules"
            formControlName="textEditor"
        >
        </quill-editor>

        <div>
            <button class="btn btn-dark btn-sm my-4" (click)="formatearConclusion()">
                Formatear conclusi贸n
            </button>
    
            <button id="crearPDF" class="btn btn-success btn-lg my-4 ms-4" (click)="guardar()">
              Crear PDF
            </button>
        </div>
        <center>
        <div class="pdf"  *ngIf="enlacePdf !== ''">
            
                <pdf-viewer
            class="pdf-generado"
              [src]="enlacePdf" [render-text]="true" [original-size]="false"
              
            ></pdf-viewer>
                        <button class="btn btn-success btn-lg my-4" (click)="firmar()">
                            Firmar
                        </button>
            
        </div>
        </center>
      </form>


    </div>

    <div *ngIf="mostrarSubidaExterna">
      <app-subir-interpretacion [idPacs]="this.estudio?.idPacs"></app-subir-interpretacion>
      <button class="btn btn-success btn-lg my-2" (click)="regresar()">Regresar</button>
    </div>




</form> -->